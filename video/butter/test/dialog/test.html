<!doctype html>
<html>
  <head>
    <script type="text/javascript" src="../../src/dialog/dialog-comm.js"></script>
    <script type="text/javascript">
      (function(){
        var _comm = new Comm(),
            _counter = 0;

        document.addEventListener( "DOMContentLoaded", function( e ){
          var okButton = document.getElementById( "ok" ),
              cancelButton = document.getElementById( "cancel" );

          okButton.addEventListener( "click", function( e ){
            _comm.send( "submit", {
              test: "Test submission!"
            });
            _comm.send( "close" );
          }, false );

          cancelButton.addEventListener( "click", function( e ){
            _comm.send( "cancel" );
          }, false );

          _comm.listen( "test", function( e ){
            ++_counter;
            document.getElementById( "counter" ).innerHTML = _counter;
          });

        }, false );
        
      })();
    </script>
  </head>
  <body>
    <h1>This is a dialog</h1>
    <h2>Test counter: <span id="counter">0</span></h2>
    <input id="ok" type="button" value="Ok" />
    <input id="cancel" type="button" value="Cancel" />
  </body>
</html
